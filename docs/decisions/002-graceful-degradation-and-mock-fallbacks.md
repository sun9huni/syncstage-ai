# [ADR-002] 해커톤 환경을 위한 우아한 기능 저하 (Graceful Degradation & Mock Fallbacks)

## 상태 (Status)
**수용됨 (Accepted)**
날짜: 2026-02-28

## 컨텍스트 (Context)
해커톤의 라이브 데모 환경은 네트워크 제약, 트래픽 폭주, 그리고 무료 API 할당량(Quota) 초과 등 예측 불가능한 변수가 많습니다.
데이터 뼈대를 잘 구축했더라도, Gemini API 호출 실패 시 에러만 띄우고 앱이 마비된다면 "Product"로서의 가치를 심사위원에게 제대로 전달할 수 없습니다.

## 결정 (Decision)
API 의존성을 줄이고 데모 생존성을 높이기 위해 다음 3단계의 **Graceful Degradation(우아한 기능 저하)** 및 **폴백(Fallback)** 아키텍처를 도입합니다.

1. **`api/visual` 율한 폴백 처리:**
   Gemini API(비주얼 프롬프트 요약)가 429 Quota 에러 등으로 실패하더라도 에러를 프론트엔드에 던지지 않고 예외를 삼킵니다(`catch`). 그 후 기존 `concept.style`을 활용하여 미리 매핑된 Unsplash 고화질 이미지를 정상 반환합니다.
2. **`api/patch` 대신 프론트엔드 직접 변형 허용:**
   서버를 거치지 않고 프론트엔드의 `React State`만을 직접 조작하는 'Demo 전용 Mock 패치 버튼' 4종을 도입합니다.
3. **오프라인 검증 스크립트 분리:**
   API 장애 상황을 시뮬레이션하기 위한 `test-offline-fallback.mjs` 검증 체계를 구축합니다.

## 결과 (Consequences)
**장점 (Pros):**
* **발표 생존력(Survivability):** 심사위원이 언제, 몇 번을 광클하더라도 데모의 메인 흐름(오디오 재생 -> 3D 아바타 싱크 전환 -> 시각화)이 절대로 끊기지 않습니다.
* **빠른 반응형 UI 피드백:** Mock 패치 버튼을 통해 서버 Round-trip 없이 0초 만에 3D 아바타가 전환되는 것을 즉각적으로 보여줄 수 있습니다.

**단점 (Cons):**
* 데모 UI 코드와 실제 프로덕션 서버 통신 코드가 약간 혼재되므로, 해커톤 종료 후 "데모 전용" 로직(`DEMO_PATCHES`)을 제거하는 리팩토링이 필요합니다.
